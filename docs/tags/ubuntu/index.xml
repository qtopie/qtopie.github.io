<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ubuntu on Blog | qtopierw</title>
    <link>https://qtopie.github.io/tags/ubuntu/</link>
    <description>Recent content in ubuntu on Blog | qtopierw</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <managingEditor>qtopie.rw@gmail.com (qtopierw)</managingEditor>
    <webMaster>qtopie.rw@gmail.com (qtopierw)</webMaster>
    <copyright>Posts licensed under &lt;a href=&#34;https://creativecommons.org/licenses/by/4.0/legalcode&#34;&gt;CC BY 4.0</copyright>
    <lastBuildDate>Sat, 09 Mar 2019 11:29:38 +0800</lastBuildDate><atom:link href="https://qtopie.github.io/tags/ubuntu/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Ubuntu下使用MT7612U</title>
      <link>https://qtopie.github.io/posts/linux/mt7612u-driver/</link>
      <pubDate>Sat, 09 Mar 2019 11:29:38 +0800</pubDate>
      <author>qtopie.rw@gmail.com (qtopierw)</author>
      <guid>https://qtopie.github.io/posts/linux/mt7612u-driver/</guid>
      <description>由于墙挡住了路由器WIFI信号，虽然5G频率的WIFI传输速率很快，但是信号衰减。WIFI无线通信是双方向的，就算路由信号能覆盖到，但考虑到手机或笔记本功率和天线的限制，难保证信号稳定。所以在淘宝上买了一个功能还算强大的无线网卡ComFast 926AC v2，双频WIFI外置双天线。没提前研究，“号称免驱动&amp;quot;，结果拿回来就懵了。
安装驱动 设备: Comfast 926AC v2 系统： Ubuntu 18.04
因为是联发科的芯片，通常都是在同一份驱动代码上改改完成的。故从github上寻找了下面两个仓库的代码。
ulli-kroll/mt7612u, jurobystricky/Netgear-A6210 官方驱动
上面两驱动实际是在官方源码上改写的，但编译后，三个都不能正常工作。
后来在openwrt/linux项目下发现该设备驱动的相关issue, 并已有大牛正在mt76驱动项目下加入该芯片的支持。故转用mt76的设备。查询linux主仓库代码发现，该驱动已随Linux内核5.0发布。因此直接下载linux 5.0内核包安装就行了。
 # 5.0: https://kernel.ubuntu.com/~kernel-ppa/mainline/v5.0/ linux-headers-5.0.0-050000_5.0.0-050000.201903032031_all.deb linux-headers-5.0.0-050000-generic_5.0.0-050000.201903032031_amd64.deb linux-image-unsigned-5.0.0-050000-generic_5.0.0-050000.201903032031_amd64.deb linux-modules-5.0.0-050000-generic_5.0.0-050000.201903032031_amd64.deb 手动升级内核后测试能使用, 并支持AP：
iwconfig
wlx40a5eff2b655 IEEE 802.11 ESSID:off/any Mode:Managed Access Point: Not-Associated Tx-Power=19 dBm Retry short limit:7 RTS thr:off Fragment thr:off Power Management:off  网卡识别为存储设备的问题  mt76还未对这款comfast网卡适配，所以默认会被系统识别为存储设备，可以手动切换过来：
sudo usb_modeswitch -KW -v 0e8d -p 2870 或者修改/lib/udev/rules.d/40-usb_modeswitch.rules文件自动切换（目前未成功）
# MT7612U ATTR{idVendor}==&amp;quot;0e8d&amp;quot;, ATTR{idProduct}==&amp;quot;2870&amp;quot;, RUN+=&amp;quot;usb_modeswitch &#39;%b/%k&#39;&amp;quot;  USB底座接触不良的问题  一起买的底座有点问题，开始还以为也要装什么驱动。检查后发现是接触不良的问题，因为USB口没有固定住，所以网卡很容易没有插入到底座中。解决办法比较简单，拆卸底座，然后填充底座中空部分，固定住USB接口。</description>
    </item>
    
    <item>
      <title>Ubuntu init process</title>
      <link>https://qtopie.github.io/posts/linux/systemd-service-unit-file/</link>
      <pubDate>Thu, 15 Sep 2016 14:20:15 +0800</pubDate>
      <author>qtopie.rw@gmail.com (qtopierw)</author>
      <guid>https://qtopie.github.io/posts/linux/systemd-service-unit-file/</guid>
      <description>History  sysVinit upstart systemd  ubuntu: sysVinit &amp;ndash;&amp;gt; upstart(6.10+) &amp;ndash;&amp;gt; systemd (15.04+)
Features of Upstart Event Based
 Start System faster (compare with previous method). Dynamically start service when discovering new device Dynamically stop service when device is removed  Systemd Systemd is a collection of system management daemons, utilities and libraries which serves as a replacement of System V init daemon. Systemd functions as central management and configuration platform for UNIX like system.</description>
    </item>
    
  </channel>
</rss>
