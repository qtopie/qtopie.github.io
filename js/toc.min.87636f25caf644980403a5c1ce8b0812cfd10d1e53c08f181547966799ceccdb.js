(function(){function e(e){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}e(function(){const i=document.querySelector("#TableOfContents");if(!i)return;const u=(e,t={closeDrawer:!1})=>{const o=e.target.closest("a");if(!o)return;const s=o.getAttribute("href")?.replace("#",""),n=s?document.getElementById(s):null;n&&(e.preventDefault(),n.scrollIntoView({behavior:"smooth",block:"start"}),history.replaceState(null,"",`#${s}`),n.classList.remove("target-highlight"),void n.offsetWidth,n.classList.add("target-highlight"),setTimeout(()=>n.classList.remove("target-highlight"),1500),t.closeDrawer&&c())};i.addEventListener("click",e=>u(e));const a=Array.from(document.querySelectorAll("article h2, article h3, article h4, article h5")).filter(e=>!e.closest(".metadata")),d=document.querySelector("article"),g=d?d.textContent.trim().length:0;if(a.length<=3&&g<1e3){const e=document.querySelector(".sidebar .toc");e&&(e.style.display="none");const t=document.querySelector(".mobile-toc-trigger");t&&t.style.setProperty("display","none","important");return}const n=document.querySelector(".mobile-toc-list");n&&n.childElementCount===0&&(n.innerHTML=i.innerHTML);const s=new Map,l=e=>{e?.querySelectorAll('a[href^="#"]').forEach(e=>{const t=e.getAttribute("href").slice(1),n=s.get(t)||[];n.push(e),s.set(t,n)})};l(i),n&&l(n),a.forEach(e=>{e.id||(e.id=e.textContent.trim().toLowerCase().replace(/\s+/g,"-"))});const o=[0,0,0,0],m=e=>o.slice(0,e+1).join(".")+".";a.forEach(e=>{const t=Number(e.tagName[1]);if(!t||t<2||t>5)return;const n=t-2;o[n]+=1;for(let e=n+1;e<o.length;e++)o[e]=0;const i=m(n),a=e.id?s.get(e.id):null;if(a&&a.forEach(e=>{if(!e.dataset.numbered){const t=e.textContent.trim();e.textContent=`${i} ${t}`,e.dataset.numbered="true"}}),!e.dataset.numbered){const n=e.textContent.trim(),t=document.createElement("span");t.className="heading-number",t.textContent=`${i} `,e.prepend(t),e.dataset.numbered="true"}});const f=e=>{for(const e of s.values())e.forEach(e=>e.classList.remove("is-active"));const t=s.get(e);t&&t.forEach(e=>e.classList.add("is-active"))},p=new IntersectionObserver(e=>{const t=e.filter(e=>e.isIntersecting).sort((e,t)=>e.target.getBoundingClientRect().top-t.target.getBoundingClientRect().top);if(t.length){const e=t[0].target.id;e&&f(e)}},{root:null,rootMargin:"-96px 0px -60% 0px",threshold:[0,.001,.25]});if(a.forEach(e=>{e.id||(e.id=e.textContent.trim().toLowerCase().replace(/\s+/g,"-")),p.observe(e)}),location.hash){const e=document.getElementById(location.hash.slice(1));e&&setTimeout(()=>e.scrollIntoView({behavior:"smooth",block:"start"}),0)}const t=document.getElementById("mobile-toc"),e=document.querySelector(".mobile-toc-overlay"),r=document.querySelector(".mobile-toc-trigger"),v=document.querySelector(".mobile-toc-close"),h=document.querySelector(".mobile-toc-body");function b(){if(!t)return;t.classList.add("open"),t.setAttribute("aria-hidden","false"),r?.setAttribute("aria-expanded","true"),e&&(e.hidden=!1,e.style.display="block"),document.body.style.overflow="hidden"}function c(){if(!t)return;t.classList.remove("open"),t.setAttribute("aria-hidden","true"),r?.setAttribute("aria-expanded","false"),e&&(e.hidden=!0,e.style.display="none"),document.body.style.overflow=""}r?.addEventListener("click",()=>b()),e?.addEventListener("click",()=>c()),v?.addEventListener("click",()=>c()),h&&h.addEventListener("click",e=>u(e,{closeDrawer:!0}))})})()